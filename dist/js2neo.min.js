!function(){function t(e){var o="";function s(e){var n,t;if(null===e)o+="À";else if("string"==typeof e)(t=e.length)<16?o+=String.fromCharCode(128+t)+e:t<256?o+="Ð"+String.fromCharCode(t)+e:t<65536&&(o+="Ñ"+String.fromCharCode(t>>8)+String.fromCharCode(255&t)+e);else if(e instanceof f)for(o+=String.fromCharCode(176+e.fields.length,e.tag),n=0;n<e.fields.length;n++)s(e.fields[n]);else{var r=Object.getOwnPropertyNames(e);for(o+=String.fromCharCode(160+r.length),n=0;n<r.length;n++)s(r[n]),s(e[r[n]])}}for(var n=0;n<e.length;n++)s(e[n]);return o}function a(o){var e=[],s=0;function n(e){var n=s;return s+=e,n}function t(e){for(var n="",t=s+e;s<t;s++)n+=String.fromCharCode(o.getUint8(s));return n}function r(e){for(var n=[],t=0;t<e;t++)n.push(a());return n}function i(e){for(var n={},t=0;t<e;t++){n[a()]=a()}return n}function a(){var e=o.getUint8(s++);return e<128?e:e<144?t(e-128):e<160?r(e-144):e<176?i(e-160):e<192?function(e){for(var n=o.getUint8(s++),t=[],r=0;r<e;r++)t.push(a());return new f(n,t)}(e-176):e<193?null:e<194?o.getFloat64(n(8)):!(e<195)&&(e<196||(e<200?void 0:e<201?o.getInt8(n(1)):e<202?o.getInt16(n(2)):e<203?o.getInt32(n(4)):e<204?[o.getUint32(n(4)),o.getUint32(n(4))]:e<208?void 0:e<209?t(o.getUint8(s++)):e<210?t(o.getUint16(n(2))):e<211?t(o.getUint32(n(4))):e<212?void 0:e<213?r(o.getUint8(s++)):e<214?r(o.getUint16(n(2))):e<215?r(o.getUint32(n(4))):e<216?void 0:e<217?i(o.getUint8(s++)):e<218?i(o.getUint16(n(2))):e<219?i(o.getUint32(n(4))):e<240?void 0:e-256))}for(;s<o.byteLength;)e.push(a());return e}function f(e,n){this.tag=e,this.fields=n,this.toString=function(){return"Structure<"+this.tag+">("+JSON.stringify(this.fields)+")"}}function u(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n.buffer}function c(e,n){this.message=e,this.handler=n}function n(e){var o=this;function s(){for(;0<o.requests.length;){var e=o.requests.shift();o.handlers.push(e.handler),console.log("C: "+e.message);for(var n=t([e.message]);32767<n.length;)o.socket.send(new Uint8Array([127,255])),o.socket.send(u(n.substr(0,32767))),n=n.substr(32767);o.socket.send(new Uint8Array([n.length>>8,255&n.length])),o.socket.send(u(n)),o.socket.send(new Uint8Array([0,0]))}}function r(e){var n,t,r;""===e?(n=u(o.chunkInputBuffer.join()),t=a(new DataView(n))[0],(r=113===t.tag?o.handlers[0]:o.handlers.shift())&&r[t.tag](t.fields[0]),o.chunkInputBuffer=[]):o.chunkInputBuffer.push(e)}function i(e){o.rawInputBuffer+=function(e){for(var n=new DataView(e),t="",r=0;r<n.byteLength;r++)t+=String.fromCharCode(n.getUint8(r));return t}(e.data);for(var n=!0;n;){var t=2+(256*o.rawInputBuffer.charCodeAt(0)+o.rawInputBuffer.charCodeAt(1));o.rawInputBuffer.length>=t?(r(o.rawInputBuffer.slice(2,t)),o.rawInputBuffer=o.rawInputBuffer.substr(t)):n=!1}}e=e||{},o.socket=new WebSocket("ws://"+(e.host||"localhost")+":"+(e.port||7687)),o.socket.binaryType="arraybuffer",o.rawInputBuffer="",o.chunkInputBuffer=[],o.requests=[new c(new f(1,["js2neo/1.0.0-alpha.0",{scheme:"basic",principal:e.user||"neo4j",credentials:e.password||"password"}]),{112:console.log,113:console.log,126:console.log,127:console.log})],o.handlers=[],o.ready=!1,o.socket.addEventListener("message",function e(n){o.socket.removeEventListener("message",e);var t=new DataView(n.data);o.protocolVersion=t.getInt32(0,!1),console.log("Using protocol version "+o.protocolVersion),o.socket.addEventListener("message",i),s(),o.ready=!0}),o.socket.addEventListener("open",function(e){var n=new Uint8Array([96,96,176,23]),t=new DataView(new ArrayBuffer(16));t.setInt32(0,2,!1),t.setInt32(4,1,!1),o.socket.send(n),o.socket.send(t)}),o.socket.addEventListener("error",function(e){console.log(e)}),o.socket.addEventListener("close",function(e){console.log(e)}),o.protocolVersion=null,o.run=function(e){var n=e.cypher;if(0<n.length){var t=new c(new f(16,[n,e.parameters||{}]),{112:console.log,113:console.log,126:console.log,127:console.log}),r=new c(new f(63,[]),{112:console.log,113:console.log,126:console.log,127:console.log});o.requests.push(t),o.requests.push(r)}o.ready&&s()}}window.js2neo={graph:function(e){return new n(e)},Z:Z}}();