!function(){function a(e){var o="";function s(e){var n,t;if(null===e)o+="À";else if("string"==typeof e)(t=e.length)<16?o+=String.fromCharCode(128+t)+e:t<256?o+="Ð"+String.fromCharCode(t)+e:t<65536&&(o+="Ñ"+String.fromCharCode(t>>8)+String.fromCharCode(255&t)+e);else if(e instanceof f)for(o+=String.fromCharCode(176+e.fields.length,e.tag),n=0;n<e.fields.length;n++)s(e.fields[n]);else{var r=Object.getOwnPropertyNames(e);for(o+=String.fromCharCode(160+r.length),n=0;n<r.length;n++)s(r[n]),s(e[r[n]])}}for(var n=0;n<e.length;n++)s(e[n]);return o}function u(o){var e=[],s=0;function n(e){var n=s;return s+=e,n}function t(e){for(var n="",t=s+e;s<t;s++)n+=String.fromCharCode(o.getUint8(s));return n}function r(e){for(var n=[],t=0;t<e;t++)n.push(a());return n}function i(e){for(var n={},t=0;t<e;t++){n[a()]=a()}return n}function a(){var e=o.getUint8(s++);return e<128?e:e<144?t(e-128):e<160?r(e-144):e<176?i(e-160):e<192?function(e){for(var n=o.getUint8(s++),t=[],r=0;r<e;r++)t.push(a());return new f(n,t)}(e-176):e<193?null:e<194?o.getFloat64(n(8)):e<196?!!(1&e):e<200?void 0:e<201?o.getInt8(n(1)):e<202?o.getInt16(n(2)):e<203?o.getInt32(n(4)):e<204?[o.getUint32(n(4)),o.getUint32(n(4))]:e<208?void 0:e<209?t(o.getUint8(s++)):e<210?t(o.getUint16(n(2))):e<211?t(o.getUint32(n(4))):e<212?void 0:e<213?r(o.getUint8(s++)):e<214?r(o.getUint16(n(2))):e<215?r(o.getUint32(n(4))):e<216?void 0:e<217?i(o.getUint8(s++)):e<218?i(o.getUint16(n(2))):e<219?i(o.getUint32(n(4))):e<240?void 0:e-256}for(;s<o.byteLength;)e.push(a());return e}function f(e,n){this.tag=e,this.fields=n}function c(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n.buffer}function l(e,n){this.message=e,this.handler=n}function n(e){var s=this;function t(){for(;0<s.requests.length;){var e=s.requests.shift();s.handlers.push(e.handler);for(var n=a([e.message]);32767<n.length;)s.socket.send(new Uint8Array([127,255])),s.socket.send(c(n.substr(0,32767))),n=n.substr(32767);s.socket.send(new Uint8Array([n.length>>8,255&n.length])),s.socket.send(c(n)),s.socket.send(new Uint8Array([0,0]))}}function r(e){var n,t,r,o;""===e?(n=c(s.chunkInputBuffer.join()),r=u(new DataView(n))[0],(o=113===r.tag?s.handlers[0]:s.handlers.shift())&&(t=o[r.tag])&&t(r.fields[0]),s.chunkInputBuffer=[]):s.chunkInputBuffer.push(e)}function o(e){s.rawInputBuffer+=function(e){for(var n=new DataView(e),t="",r=0;r<n.byteLength;r++)t+=String.fromCharCode(n.getUint8(r));return t}(e.data);for(var n=!0;n;){var t=2+(256*s.rawInputBuffer.charCodeAt(0)+s.rawInputBuffer.charCodeAt(1));s.rawInputBuffer.length>=t?(r(s.rawInputBuffer.slice(2,t)),s.rawInputBuffer=s.rawInputBuffer.substr(t)):n=!1}}function i(e){console.log(JSON.stringify(e));var n=new l(new f(14,[]),{112:console.log,127:console.log});s.requests.push(n)}e=e||{},s.socket=new WebSocket("ws://"+(e.host||"localhost")+":"+(e.port||7687)),s.socket.binaryType="arraybuffer",s.rawInputBuffer="",s.chunkInputBuffer=[],s.requests=[new l(new f(1,["js2neo/1.0.0-alpha.0",{scheme:"basic",principal:e.user||"neo4j",credentials:e.password||"password"}]),{112:console.log,127:console.log})],s.handlers=[],s.ready=!1,s.t0=[],s.socket.onmessage=function(e){var n=new DataView(e.data);s.protocolVersion=n.getInt32(0,!1),console.log("Using protocol version "+s.protocolVersion),s.socket.onmessage=o,t(),s.ready=!0},s.socket.onerror=console.log,s.socket.onclose=console.log,s.socket.onopen=function(){s.socket.send(new Uint8Array([96,96,176,23,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0]))},s.protocolVersion=null,s.run=function(n){s.t0.push(new Date);var e=n.cypher;0<e.length&&(s.requests.push(new l(new f(16,[e,n.parameters||{}]),{112:n.onHeader||console.log,127:i})),s.requests.push(new l(new f(63,[]),{112:function(e){e.time=new Date-s.t0.shift()+"ms",(n.onFooter||console.log)(e)},113:n.onRecord||console.log,127:i}))),s.ready&&t()}}window.js2neo={bolt:function(e){return new n(e)}}}();