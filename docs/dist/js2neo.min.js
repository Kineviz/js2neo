!function(){var n="days",e="id",o="nanoseconds",i="properties",r="seconds",p=String.fromCharCode;function s(t){for(var n=0;n<t.length;n++)this[arguments[n+1]]=t[n]}DataView.prototype.getInt64=function(t,n){var e=this.getUint32(t,n),o=this.getUint32(t+4,n);for(e=e.toString(16);e.length<8;)e="0"+e;for(o=o.toString(16);o.length<8;)o="0"+o;return parseInt("0x"+e+o,16)},window.js2neo={bolt:function(t){return new a(t)},Node:function(t){s.call(this,t,e,"labels",i)},Relationship:function(t){s.call(this,t,e,"start","end","type",i)},Path:function(t){var n,e,o,i,r=t[0],s=t[1],a=t[2],c=r[0],u=[c];for(e=0;e<a.length;e+=2)o=a[e],n=r[a[2*e+1]],0<o?(i=s[o-1],u.push(new js2neo.Relationship([i.id,c.id,n.id,i.type,i.properties]))):(i=s[s.length+o],u.push(new js2neo.Relationship([i.id,n.id,c.id,i.type,i.properties]))),u.push(n),c=n;this.entities=u},Point:function(t){s.call(this,t,"srid","x","y")},Date:function(t){s.call(this,t,n)},Time:function(t){this.seconds=t[0]/1e9,this.tz=t[1]},LocalTime:function(t){this.seconds=t[0]/1e9},DateTime:function(t){s.call(this,t,r,o,"tz")},LocalDateTime:function(t){s.call(this,t,r,o)},Duration:function(t){s.call(this,t,"months",n,r,o)},version:"1.0.0-alpha.0"};var l={68:js2neo.Date,69:js2neo.Duration,70:js2neo.DateTime,78:js2neo.Node,80:js2neo.Path,82:js2neo.Relationship,84:js2neo.Time,88:js2neo.Point,100:js2neo.LocalDateTime,102:js2neo.DateTime,114:function(t){s.call(this,t,e,"type",i)},116:js2neo.LocalTime};function d(){}function v(t,n){var i=p(176+n.length,t);function r(t){var n,e;if(null===t)i+="À";else if("string"==typeof t)(e=t.length)<16?i+=p(128+e)+t:e<256?i+="Ð"+p(e)+t:e<65536&&(i+="Ñ"+p(e>>8)+p(255&e)+t);else{var o=Object.getOwnPropertyNames(t);for(i+=p(160+o.length),n=0;n<o.length;n++)r(o[n]),r(t[o[n]])}}for(var e=0;e<n.length;e++)r(n[e]);return i}function y(i){var r=0;function s(t){var n=r;return r+=t,n}function a(t){for(var n="",e=r+t;r<e;r++)n+=p(i.getUint8(r));return n}function c(t){for(var n=[],e=0;e<t;e++)n.push(o());return n}function u(t){for(var n={},e=0;e<t;e++){n[o()]=o()}return n}function h(t){for(var n=[i.getUint8(r++)],e=0;e<t;e++)n.push(o());return n}function o(){var t,n,e,o=i.getUint8(r++);return o<128?o:o<144?a(o-128):o<160?c(o-144):o<176?u(o-160):o<192?(t=h(o-176),n=t[0],(e=l[n])?new e(t.slice(1)):t):o<193?null:o<194?i.getFloat64(s(8),!1):o<196?!!(1&o):o<200?void 0:o<201?i.getInt8(s(1)):o<202?i.getInt16(s(2),!1):o<203?i.getInt32(s(4),!1):o<204?i.getInt64(s(8),!1):o<208?void 0:o<209?a(i.getUint8(r++)):o<210?a(i.getUint16(s(2))):o<211?a(i.getUint32(s(4))):o<212?void 0:o<213?c(i.getUint8(r++)):o<214?c(i.getUint16(s(2))):o<215?c(i.getUint32(s(4))):o<216?void 0:o<217?u(i.getUint8(r++)):o<218?u(i.getUint16(s(2))):o<219?u(i.getUint32(s(4))):o<240?void 0:o-256}return h(i.getUint8(r++)-176)}function w(t){for(var n=new Uint8Array(t.length),e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}function a(t){t=t||{};var e={secure:"https:"===document.location.protocol,host:t.host||"localhost",port:t.port||7687,user:t.user||"neo4j",userAgent:t.userAgent||"js2neo/"+js2neo.version},n={scheme:"basic",principal:e.user,credentials:t.password},o=new Uint8Array(2),u={},h=[],l=[],i=t.onConnect||d,r=t.onError||d;function s(t){u.socket.send(t)}function f(t){try{u.socket.close(1002,t.code+": "+t.message)}catch(t){}r(t.code+": "+t.message)}function a(){function t(t,n){o[0]=t,o[1]=n,s(o)}for(;0<h.length;){var n=h.shift(),e=v(n[0],n[1]);for(l.push(n[2]);32767<e.length;)t(127,255),s(w(e.substr(0,32767))),e=e.substr(32767);t(e.length>>8,255&e.length),s(w(e)),t(0,0)}}function c(t){var n=new DataView(t.data);e.protocolVersion=n.getInt32(0,!1),u.socket.onmessage=g,a()}function g(t){for(var n,e,o,i,r,s=!0,a=u.inData+=p.apply(null,new Uint8Array(t.data)),c=u.inChunks;s;)n=2+(a.charCodeAt(0)<<8|a.charCodeAt(1)),a.length>=n?(""===(e=a.slice(2,n))?(o=w(c.join()),void 0,i=y(new DataView(o)),r=113===i[0]?l[0]:l.shift(),127===i[0]&&h.push([14,[],{127:f}]),r&&(r[i[0]]||d)(i[1]),c=u.inChunks=[]):c.push(e),a=u.inData=u.inData.substr(n)):s=!1}this.run=function(t){var n=t.cypher;0<n.length&&(h.push([16,[n,t.parameters||{}],{112:t.onHeader||d,127:t.onFailure||d}]),h.push([63,[],{112:t.onFooter||d,113:t.onRecord||d,127:t.onFailure||d}])),u.ready&&a()},u.inData="",u.inChunks=[],u.ready=!1,u.socket=new WebSocket((e.secure?"wss":"ws")+"://"+e.host+":"+e.port),u.socket.binaryType="arraybuffer",u.socket.onmessage=c,u.socket.onerror=r,u.socket.onclose=t.onClose||d,u.socket.onopen=function(){s(new Uint8Array([96,96,176,23,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0]))},h.push([1,[e.userAgent,n],{112:function(){i(e),u.ready=!0},127:f}])}}();