/*
 * js2neo v1.0.0-beta.1
 * Copyright (C) 2011-2018 Nigel Small
 * Licensed under the Apache License, Version 2.0
 */
!function(n){var t="days",e="id",o="nanoseconds",i="properties",r="seconds",h=String.fromCharCode,g=DataView,p=Uint8Array;function s(n){for(var t=0;t<n.length;t++)this[arguments[t+1]]=n[t]}n.js2neo={bolt:function(n){return new a(n)},Node:function(n){s.call(this,n,e,"labels",i)},Relationship:function(n){s.call(this,n,e,"start","end","type",i)},Path:function(n){var t,e,o,i,r=n[0],s=n[1],a=n[2],u=r[0],c=[u],l=js2neo.Relationship;for(e=0;e<a.length;e+=2)o=a[e],t=r[a[2*e+1]],0<o?(i=s[o-1],c.push(new l([i.id,u.id,t.id,i.type,i.properties]))):(i=s[s.length+o],c.push(new l([i.id,t.id,u.id,i.type,i.properties]))),c.push(t),u=t;this.entities=c},Point:function(n){s.call(this,n,"srid","x","y")},Date:function(n){s.call(this,n,t)},Time:function(n){this.seconds=n[0]/1e9,this.tz=n[1]},LocalTime:function(n){this.seconds=n[0]/1e9},DateTime:function(n){s.call(this,n,r,o,"tz")},LocalDateTime:function(n){s.call(this,n,r,o)},Duration:function(n){s.call(this,n,"months",t,r,o)},version:"1.0.0-beta.1"};var l={68:js2neo.Date,69:js2neo.Duration,70:js2neo.DateTime,78:js2neo.Node,80:js2neo.Path,82:js2neo.Relationship,84:js2neo.Time,88:js2neo.Point,100:js2neo.LocalDateTime,102:js2neo.DateTime,114:function(n){s.call(this,n,e,"type",i)},116:js2neo.LocalTime};function d(){}function v(n,t){var r=h(176+t.length,n);function s(n){return h(n>>24)+h(n>>16&255)+h(n>>8&255)+h(255&n)}function a(n){var t=new p(8);new g(t.buffer).setFloat64(0,n,!1),r+="Á"+h.apply(null,t)}function u(n,t,e,o,i){return n=Math.min(n,2147483647),r+=n<16?h(t+n):n<256?e+h(n):n<65536?o+h(n>>8)+h(255&n):i+s(n),n}function c(n){if(Array.isArray(n))!function(n){for(var t=u(n.length,144,"Ô","Õ","Ö"),e=0;e<t;e++)c(n[e])}(n);else{var t=typeof n;"boolean"===t?r+=n?"Ã":"Â":"number"===t?n%1==0?0<=(i=n)&&i<128?r+=h(i):-16<=i&&i<0?r+=h(256+i):-32768<=i&&i<32768?r+="É"+h(i>>8)+h(255&i):-2147483648<=i&&i<2147483648?r+="Ê"+s(i):a(i):a(n):"string"===t?(o=u((e=n).length,128,"Ð","Ñ","Ò"),r+=e.substr(0,o)):"object"===t?function(n){for(var t,e=Object.getOwnPropertyNames(n),o=u(e.length,160,"Ø","Ù","Ú"),i=0;i<o;i++)c(t=e[i]),c(n[t])}(n):r+="À"}var e,o,i}return t.forEach(c),r}function w(o){var i=0;function r(n){var t=i;return i+=n,t}function s(n){for(var t="",e=i+n;i<e;i++)t+=h(o.getUint8(i));return t}function a(n){for(var t=[];n--;)t.push(e());return t}function u(n){for(var t={};n--;){t[e()]=e()}return t}function c(n){for(var t=[o.getUint8(i++)];n--;)t.push(e());return t}function e(){var n,t,e=o.getUint8(i++);return e<128?e:e<144?s(e-128):e<160?a(e-144):e<176?u(e-160):e<192?(n=c(e-176),(t=l[n[0]])?new t(n.slice(1)):n):e<193?null:e<194?o.getFloat64(r(8),!1):e<196?!!(1&e):e<200?void 0:e<201?o.getInt8(r(1)):e<202?o.getInt16(r(2),!1):e<203?o.getInt32(r(4),!1):e<204?function(n,t){for(var e=n.getUint32(t,!1).toString(16),o=n.getUint32(t+4,!1).toString(16);e.length<8;)e="0"+e;for(;o.length<8;)o="0"+o;return parseInt("0x"+e+o,16)}(o,r(8)):e<208?void 0:e<209?s(o.getUint8(i++)):e<210?s(o.getUint16(r(2))):e<211?s(o.getUint32(r(4))):e<212?void 0:e<213?a(o.getUint8(i++)):e<214?a(o.getUint16(r(2))):e<215?a(o.getUint32(r(4))):e<216?void 0:e<217?u(o.getUint8(i++)):e<218?u(o.getUint16(r(2))):e<219?u(o.getUint32(r(4))):e<240?void 0:e-256}return c(o.getUint8(i++)-176)}function j(n){for(var t=new p(n.length),e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return t.buffer}function a(e){var o={secure:(e=e||{}).secure||"https:"===document.location.protocol,host:e.host||"localhost",port:e.port||7687,user:e.user||"neo4j",userAgent:e.userAgent||"js2neo/"+js2neo.version},t={scheme:"basic",principal:o.user,credentials:e.password},i=new p(2),c={},l=[],f=[];function r(n){c.socket.send(n)}function s(){function n(n,t){i[0]=n,i[1]=t,r(i)}for(;0<l.length;){var t=l.shift(),e=v(t[0],t[1]);for(f.push(t[2]);32767<e.length;)n(127,255),r(j(e.substr(0,32767))),e=e.substr(32767);n(e.length>>8,255&e.length),r(j(e)),n(0,0)}}function a(n){var t=new g(n.data);o.protocolVersion=t.getInt32(0,!1),(e.onHandshake||d)(o),c.socket.onmessage=u,s()}function u(n){for(var t,e,o,i,r,s=1,a=c.inData+=h.apply(null,new p(n.data)),u=c.inChunks;s;)t=2+(a.charCodeAt(0)<<8|a.charCodeAt(1)),a.length>=t?(""===(e=a.slice(2,t))?(o=j(u.join()),void 0,i=w(new g(o)),r=113===i[0]?f[0]:f.shift(),127===i[0]&&l.push([14,[],{127:function(n){c.socket.close(4002,n.code+": "+n.message)}}]),r&&(r[i[0]]||d)(i[1]),u=c.inChunks=[]):u.push(e),a=c.inData=c.inData.substr(t)):s=0}this.run=function(n,t){0<n.length&&(l.push([16,[n,t.params||{}],{112:t.onHeader||d,127:t.onFailure||d}]),l.push([63,[],{112:t.onFooter||d,113:t.onRecord||d,127:t.onFailure||d}])),c.ready&&s()},this.close=function(){c.socket.close()},function(){c.inData="",c.inChunks=[],c.ready=!1;var n=c.socket=new WebSocket((o.secure?"wss":"ws")+"://"+o.host+":"+o.port);n.binaryType="arraybuffer",n.onmessage=a,n.onerror=e.onError||d,n.onclose=e.onClose||d,n.onopen=function(){(e.onOpen||d)(o),r(new p([96,96,176,23,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0]))},l.push([1,[o.userAgent,t],{112:function(){(e.onInit||d)(o),c.ready=!0},127:function(n){(e.onInitFailure||d)(n)}}])}()}console.log("js2neo v"+n.js2neo.version)}("undefined"!=typeof window?window:global);
