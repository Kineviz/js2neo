!function(){var t="days",e="id",o="nanoseconds",i="properties",r="seconds",p=String.fromCharCode;function s(n){for(var t=0;t<n.length;t++)this[arguments[t+1]]=n[t]}window.js2neo={bolt:function(n){return new a(n)},Node:function(n){s.call(this,n,e,"labels",i)},Relationship:function(n){s.call(this,n,e,"start","end","type",i)},Path:function(n){var t,e,o,i,r=n[0],s=n[1],a=n[2],c=r[0],u=[c];for(e=0;e<a.length;e+=2)o=a[e],t=r[a[2*e+1]],0<o?(i=s[o-1],u.push(new js2neo.Relationship([i.id,c.id,t.id,i.type,i.properties]))):(i=s[s.length+o],u.push(new js2neo.Relationship([i.id,t.id,c.id,i.type,i.properties]))),u.push(t),c=t;this.entities=u},Point:function(n){s.call(this,n,"srid","x","y")},Date:function(n){s.call(this,n,t)},Time:function(n){this.seconds=n[0]/1e9,this.tz=n[1]},LocalTime:function(n){this.seconds=n[0]/1e9},DateTime:function(n){s.call(this,n,r,o,"tz")},LocalDateTime:function(n){s.call(this,n,r,o)},Duration:function(n){s.call(this,n,"months",t,r,o)},version:"1.0.0-alpha.0"};var h={68:js2neo.Date,69:js2neo.Duration,70:js2neo.DateTime,78:js2neo.Node,80:js2neo.Path,82:js2neo.Relationship,84:js2neo.Time,88:js2neo.Point,100:js2neo.LocalDateTime,102:js2neo.DateTime,114:function(n){s.call(this,n,e,"type",i)},116:js2neo.LocalTime};function d(){}function v(n,t){var i=p(176+t.length,n);function r(n){var t,e;if(null===n)i+="À";else if("string"==typeof n)(e=n.length)<16?i+=p(128+e)+n:e<256?i+="Ð"+p(e)+n:e<65536&&(i+="Ñ"+p(e>>8)+p(255&e)+n);else{var o=Object.getOwnPropertyNames(n);for(i+=p(160+o.length),t=0;t<o.length;t++)r(o[t]),r(n[o[t]])}}for(var e=0;e<t.length;e++)r(t[e]);return i}function y(i){var r=0;function s(n){var t=r;return r+=n,t}function a(n){for(var t="",e=r+n;r<e;r++)t+=p(i.getUint8(r));return t}function c(n){for(var t=[],e=0;e<n;e++)t.push(o());return t}function u(n){for(var t={},e=0;e<n;e++){t[o()]=o()}return t}function l(n){for(var t=[i.getUint8(r++)],e=0;e<n;e++)t.push(o());return t}function o(){var n,t,e,o=i.getUint8(r++);return o<128?o:o<144?a(o-128):o<160?c(o-144):o<176?u(o-160):o<192?(n=l(o-176),t=n[0],(e=h[t])?new e(n.slice(1)):n):o<193?null:o<194?i.getFloat64(s(8),!1):o<196?!!(1&o):o<200?void 0:o<201?i.getInt8(s(1)):o<202?i.getInt16(s(2),!1):o<203?i.getInt32(s(4),!1):o<204?function(n,t,e){var o=n.getUint32(t,e),i=n.getUint32(t+4,e);for(o=o.toString(16);o.length<8;)o="0"+o;for(i=i.toString(16);i.length<8;)i="0"+i;return parseInt("0x"+o+i,16)}(i,s(8),!1):o<208?void 0:o<209?a(i.getUint8(r++)):o<210?a(i.getUint16(s(2))):o<211?a(i.getUint32(s(4))):o<212?void 0:o<213?c(i.getUint8(r++)):o<214?c(i.getUint16(s(2))):o<215?c(i.getUint32(s(4))):o<216?void 0:o<217?u(i.getUint8(r++)):o<218?u(i.getUint16(s(2))):o<219?u(i.getUint32(s(4))):o<240?void 0:o-256}return l(i.getUint8(r++)-176)}function j(n){for(var t=new Uint8Array(n.length),e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return t.buffer}function a(n){n=n||{};var e={secure:"https:"===document.location.protocol,host:n.host||"localhost",port:n.port||7687,user:n.user||"neo4j",userAgent:n.userAgent||"js2neo/"+js2neo.version},t={scheme:"basic",principal:e.user,credentials:n.password},o=new Uint8Array(2),u={},l=[],h=[],i=n.onConnect||d,r=n.onError||d;function s(n){u.socket.send(n)}function f(n){try{u.socket.close(1002,n.code+": "+n.message)}catch(n){}r(n.code+": "+n.message)}function a(){function n(n,t){o[0]=n,o[1]=t,s(o)}for(;0<l.length;){var t=l.shift(),e=v(t[0],t[1]);for(h.push(t[2]);32767<e.length;)n(127,255),s(j(e.substr(0,32767))),e=e.substr(32767);n(e.length>>8,255&e.length),s(j(e)),n(0,0)}}function c(n){var t=new DataView(n.data);e.protocolVersion=t.getInt32(0,!1),u.socket.onmessage=g,a()}function g(n){for(var t,e,o,i,r,s=!0,a=u.inData+=p.apply(null,new Uint8Array(n.data)),c=u.inChunks;s;)t=2+(a.charCodeAt(0)<<8|a.charCodeAt(1)),a.length>=t?(""===(e=a.slice(2,t))?(o=j(c.join()),void 0,i=y(new DataView(o)),r=113===i[0]?h[0]:h.shift(),127===i[0]&&l.push([14,[],{127:f}]),r&&(r[i[0]]||d)(i[1]),c=u.inChunks=[]):c.push(e),a=u.inData=u.inData.substr(t)):s=!1}this.run=function(n){var t=n.cypher;0<t.length&&(l.push([16,[t,n.parameters||{}],{112:n.onHeader||d,127:n.onFailure||d}]),l.push([63,[],{112:n.onFooter||d,113:n.onRecord||d,127:n.onFailure||d}])),u.ready&&a()},u.inData="",u.inChunks=[],u.ready=!1,u.socket=new WebSocket((e.secure?"wss":"ws")+"://"+e.host+":"+e.port),u.socket.binaryType="arraybuffer",u.socket.onmessage=c,u.socket.onerror=r,u.socket.onclose=n.onClose||d,u.socket.onopen=function(){s(new Uint8Array([96,96,176,23,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0]))},l.push([1,[e.userAgent,t],{112:function(){i(e),u.ready=!0},127:f}])}}();