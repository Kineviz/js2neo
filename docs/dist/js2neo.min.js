!function(){function c(n){var r="";function s(n){var e,t;if(null===n)r+="À";else if("string"==typeof n)(t=n.length)<16?r+=String.fromCharCode(128+t)+n:t<256?r+="Ð"+String.fromCharCode(t)+n:t<65536&&(r+="Ñ"+String.fromCharCode(t>>8)+String.fromCharCode(255&t)+n);else if(n instanceof l)for(r+=String.fromCharCode(176+n.fields.length,n.tag),e=0;e<n.fields.length;e++)s(n.fields[e]);else{var o=Object.getOwnPropertyNames(n);for(r+=String.fromCharCode(160+o.length),e=0;e<o.length;e++)s(o[e]),s(n[o[e]])}}for(var e=0;e<n.length;e++)s(n[e]);return r}function g(r){var n=[],s=0;function e(n){var e=s;return s+=n,e}function t(n){for(var e="",t=s+n;s<t;s++)e+=String.fromCharCode(r.getUint8(s));return e}function o(n){for(var e=[],t=0;t<n;t++)e.push(a());return e}function i(n){for(var e={},t=0;t<n;t++){e[a()]=a()}return e}function a(){var n=r.getUint8(s++);return n<128?n:n<144?t(n-128):n<160?o(n-144):n<176?i(n-160):n<192?function(n){for(var e=r.getUint8(s++),t=[],o=0;o<n;o++)t.push(a());return new l(e,t)}(n-176):n<193?null:n<194?r.getFloat64(e(8)):n<196?!!(1&n):n<200?void 0:n<201?r.getInt8(e(1)):n<202?r.getInt16(e(2)):n<203?r.getInt32(e(4)):n<204?[r.getUint32(e(4)),r.getUint32(e(4))]:n<208?void 0:n<209?t(r.getUint8(s++)):n<210?t(r.getUint16(e(2))):n<211?t(r.getUint32(e(4))):n<212?void 0:n<213?o(r.getUint8(s++)):n<214?o(r.getUint16(e(2))):n<215?o(r.getUint32(e(4))):n<216?void 0:n<217?i(r.getUint8(s++)):n<218?i(r.getUint16(e(2))):n<219?i(r.getUint32(e(4))):n<240?void 0:n-256}for(;s<r.byteLength;)n.push(a());return n}function l(n,e){this.tag=n,this.fields=e}function h(n){for(var e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer}function d(n,e){this.message=n,this.handler=e}function e(n){n=n||{};var s=this,e="https:"===document.location.protocol?"wss":"ws";s.socket=new WebSocket(e+"://"+(n.host||"localhost")+":"+(n.port||7687)),s.socket.binaryType="arraybuffer",s.rawInputBuffer="",s.chunkInputBuffer=[];var t=[new d(new l(1,["js2neo/1.0.0-alpha.0",{scheme:"basic",principal:n.user||"neo4j",credentials:n.password||"password"}]),{112:console.log,127:console.log})],i=[],o=[];function r(){for(;0<t.length;){var n=t.shift();i.push(n.handler);for(var e=c([n.message]);32767<e.length;)s.socket.send(new Uint8Array([127,255])),s.socket.send(h(e.substr(0,32767))),e=e.substr(32767);s.socket.send(new Uint8Array([e.length>>8,255&e.length])),s.socket.send(h(e)),s.socket.send(new Uint8Array([0,0]))}}function a(n){var e,t,o,r;""===n?(e=h(s.chunkInputBuffer.join()),o=g(new DataView(e))[0],(r=113===o.tag?i[0]:i.shift())&&(t=r[o.tag])&&t(o.fields[0]),s.chunkInputBuffer=[]):s.chunkInputBuffer.push(n)}function f(n){s.rawInputBuffer+=function(n){for(var e=new DataView(n),t="",o=0;o<e.byteLength;o++)t+=String.fromCharCode(e.getUint8(o));return t}(n.data);for(var e=!0;e;){var t=2+(256*s.rawInputBuffer.charCodeAt(0)+s.rawInputBuffer.charCodeAt(1));s.rawInputBuffer.length>=t?(a(s.rawInputBuffer.slice(2,t)),s.rawInputBuffer=s.rawInputBuffer.substr(t)):e=!1}}function u(n){console.log(JSON.stringify(n));var e=new d(new l(14,[]),{112:console.log,127:console.log});t.push(e)}s.ready=!1,s.socket.onmessage=function(n){var e=new DataView(n.data);s.protocolVersion=e.getInt32(0,!1),console.log("Using protocol version "+s.protocolVersion),s.socket.onmessage=f,r(),s.ready=!0},s.socket.onerror=console.log,s.socket.onclose=console.log,s.socket.onopen=function(){s.socket.send(new Uint8Array([96,96,176,23,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0]))},s.protocolVersion=null,s.run=function(e){o.push(new Date);var n=e.cypher;0<n.length&&(t.push(new d(new l(16,[n,e.parameters||{}]),{112:e.onHeader||console.log,127:u})),t.push(new d(new l(63,[]),{112:function(n){n.time=new Date-o.shift()+"ms",(e.onFooter||console.log)(n)},113:e.onRecord||console.log,127:u}))),s.ready&&r()}}window.js2neo={bolt:function(n){return new e(n)}}}();